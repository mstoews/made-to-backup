<div class="h-screen">
  <grid-menubar
    [inTitle]="sTitle"
    (notifyParentRefresh)="Refresh()"
    (notifyParentDelete)="Delete()"
    (notifyParentAdd)="Add()"
    (notifyParentClone)="Clone()"
  >
  </grid-menubar>
  <mat-drawer-container
    class="flex-col h-full"
    (onValueChangedEvent)="valueChangedEvent($event)"
  >
    <mat-drawer
      class="lg:w-1/2 md:w-1/2 sm:w-full bg-white-100"
      #drawer
      [opened]="false"
      mode="over"
      [position]="'end'"
      [disableClose]="false"
    >
      <mat-card
        class="flex flex-col w-full filter-article filter-interactive text-gray-700"
      >
        <div
          mat-dialog-title
          [ngStyle]="{ 'border-left': '10px solid' + cRAG }"
        >
          {{ sTitle }}
        </div>
        <div mat-dialog-content>
          <form
            #blogForm="ngForm"
            [formGroup]="blogGroup"
            (ngSubmit)="onUpdate(blogGroup.value)"
            class="form"
          >
            <mat-form-field
              class="form-element m-1"
              [ngStyle]="{ width: '100%' }"
            >
              <input matInput placeholder="Title" formControlName="title" />
            </mat-form-field>

            <app-gallery-lightbox [galleryData]="data" [showCount]="true">
            </app-gallery-lightbox>

            <mat-tab-group #tabGroup class="m-2">
              <mat-tab label="Introduction">
                <ng-template matTabContent>
                  <!-- <text-editor [valueContent]="para" ></text-editor> -->
                  <dx-html-editor height="250px" [(value)]="para">
                    <dxo-toolbar>
                      <dxi-item name="undo"></dxi-item>
                      <dxi-item name="redo"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item
                        name="size"
                        [acceptedValues]="['8pt','10pt',
                          '12pt',
                          '14pt',
                          '18pt',
                          '24pt',
                          '36pt'
                        ]"
                      ></dxi-item>
                      <dxi-item
                        name="font"
                        [acceptedValues]="[
                          'Arial',
                          'Courier New',
                          'Georgia',
                          'Impact',
                          'Lucida Console',
                          'Tahoma',
                          'Times New Roman',
                          'Verdana'
                        ]"
                      ></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="bold"></dxi-item>
                      <dxi-item name="italic"></dxi-item>
                      <dxi-item name="strike"></dxi-item>
                      <dxi-item name="underline"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="alignLeft"></dxi-item>
                      <dxi-item name="alignCenter"></dxi-item>
                      <dxi-item name="alignRight"></dxi-item>
                      <dxi-item name="alignJustify"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="orderedList"></dxi-item>
                      <dxi-item name="bulletList"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item
                        name="header"
                        [acceptedValues]="[false, 1, 2, 3, 4, 5]"
                      ></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="color"></dxi-item>
                      <dxi-item name="background"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="link"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="clear"></dxi-item>
                      <dxi-item name="codeBlock"></dxi-item>
                      <dxi-item name="blockquote"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="insertTable"></dxi-item>
                      <dxi-item name="deleteTable"></dxi-item>
                      <dxi-item name="insertRowAbove"></dxi-item>
                      <dxi-item name="insertRowBelow"></dxi-item>
                      <dxi-item name="deleteRow"></dxi-item>
                      <dxi-item name="insertColumnLeft"></dxi-item>
                      <dxi-item name="insertColumnRight"></dxi-item>
                      <dxi-item name="deleteColumn"></dxi-item>
                    </dxo-toolbar>
                  </dx-html-editor>
                </ng-template>
              </mat-tab>
              <mat-tab label="Main">
                <ng-template matTabContent>
                  <!-- <text-editor [valueContent]="body"></text-editor> -->
                  <dx-html-editor height="250px" [(value)]="body">
                    <dxo-toolbar>
                      <dxi-item name="undo"></dxi-item>
                      <dxi-item name="redo"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item
                        name="size"
                        [acceptedValues]="['8pt','10pt',
                          '12pt',
                          '14pt',
                          '18pt',
                          '24pt',
                          '36pt'
                        ]"
                      ></dxi-item>
                      <dxi-item
                        name="font"
                        [acceptedValues]="[
                          'Arial',
                          'Courier New',
                          'Georgia',
                          'Impact',
                          'Lucida Console',
                          'Tahoma',
                          'Times New Roman',
                          'Verdana'
                        ]"
                      ></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="bold"></dxi-item>
                      <dxi-item name="italic"></dxi-item>
                      <dxi-item name="strike"></dxi-item>
                      <dxi-item name="underline"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="alignLeft"></dxi-item>
                      <dxi-item name="alignCenter"></dxi-item>
                      <dxi-item name="alignRight"></dxi-item>
                      <dxi-item name="alignJustify"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="orderedList"></dxi-item>
                      <dxi-item name="bulletList"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item
                        name="header"
                        [acceptedValues]="[false, 1, 2, 3, 4, 5]"
                      ></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="color"></dxi-item>
                      <dxi-item name="background"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="link"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="clear"></dxi-item>
                      <dxi-item name="codeBlock"></dxi-item>
                      <dxi-item name="blockquote"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="insertTable"></dxi-item>
                      <dxi-item name="deleteTable"></dxi-item>
                      <dxi-item name="insertRowAbove"></dxi-item>
                      <dxi-item name="insertRowBelow"></dxi-item>
                      <dxi-item name="deleteRow"></dxi-item>
                      <dxi-item name="insertColumnLeft"></dxi-item>
                      <dxi-item name="insertColumnRight"></dxi-item>
                      <dxi-item name="deleteColumn"></dxi-item>
                    </dxo-toolbar>
                  </dx-html-editor>
                </ng-template>
              </mat-tab>
              <mat-tab label="Conclusion">
                <ng-template matTabContent>
                  <!-- <text-editor [valueContent]="conclusion"></text-editor> -->
                  <dx-html-editor height="250px" [(value)]="conclusion">
                    <dxo-toolbar>
                      <dxi-item name="undo"></dxi-item>
                      <dxi-item name="redo"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item
                        name="size"
                        [acceptedValues]="['8pt','10pt',
                          '12pt',
                          '14pt',
                          '18pt',
                          '24pt',
                          '36pt'
                        ]"
                      ></dxi-item>
                      <dxi-item
                        name="font"
                        [acceptedValues]="[
                          'Arial',
                          'Courier New',
                          'Georgia',
                          'Impact',
                          'Lucida Console',
                          'Tahoma',
                          'Times New Roman',
                          'Verdana'
                        ]"
                      ></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="bold"></dxi-item>
                      <dxi-item name="italic"></dxi-item>
                      <dxi-item name="strike"></dxi-item>
                      <dxi-item name="underline"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="alignLeft"></dxi-item>
                      <dxi-item name="alignCenter"></dxi-item>
                      <dxi-item name="alignRight"></dxi-item>
                      <dxi-item name="alignJustify"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="orderedList"></dxi-item>
                      <dxi-item name="bulletList"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item
                        name="header"
                        [acceptedValues]="[false, 1, 2, 3, 4, 5]"
                      ></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="color"></dxi-item>
                      <dxi-item name="background"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="link"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="clear"></dxi-item>
                      <dxi-item name="codeBlock"></dxi-item>
                      <dxi-item name="blockquote"></dxi-item>
                      <dxi-item name="separator"></dxi-item>
                      <dxi-item name="insertTable"></dxi-item>
                      <dxi-item name="deleteTable"></dxi-item>
                      <dxi-item name="insertRowAbove"></dxi-item>
                      <dxi-item name="insertRowBelow"></dxi-item>
                      <dxi-item name="deleteRow"></dxi-item>
                      <dxi-item name="insertColumnLeft"></dxi-item>
                      <dxi-item name="insertColumnRight"></dxi-item>
                      <dxi-item name="deleteColumn"></dxi-item>
                    </dxo-toolbar>
                  </dx-html-editor>
                </ng-template>
              </mat-tab>
            </mat-tab-group>

            <mat-form-field
              class="form-element m-1"
              [ngStyle]="{ width: '49%' }"
            >
              <input
                matInput
                placeholder="Created Date"
                type="date"
                id="date_created"
                formControlName="date_created"
              />
            </mat-form-field>

            <mat-form-field
              class="form-element m-1"
              [ngStyle]="{ width: '48%' }"
            >
              <input
                matInput
                placeholder="Updated Date"
                type="date"
                id="date_updated"
                formControlName="date_updated"
              />
            </mat-form-field>
          </form>
        </div>
        <div mat-dialog-actions>
          <button
            mat-icon-button
            mat-flat-button
            (click)="onUpdate(blog)"
            color="primary"
            aria-label="Add"
          >
            <mat-icon [svgIcon]="'mat_outline:update'"></mat-icon>
          </button>
          <button
            mat-icon-button
            (click)="onCreate()"
            mat-flat-button
            color="primary"
            [disabled]="!blogGroup.valid"
          >
            <mat-icon [svgIcon]="'mat_outline:add'"></mat-icon>
          </button>
          <button
            mat-icon-button
            (click)="onDelete(blog)"
            mat-flat-button
            color="primary"
            [disabled]="!blogGroup.valid"
          >
            <mat-icon [svgIcon]="'mat_outline:delete'"></mat-icon>
          </button>
          <button
            mat-icon-button
            (click)="onImages()"
            mat-flat-button
            color="primary"
            [disabled]="!blogGroup.valid"
          >
            <mat-icon [svgIcon]="'mat_outline:design_services'"></mat-icon>
          </button>
          <button
            mat-icon-button
            (click)="closeDialog()"
            mat-flat-button
            color="warn"
          >
            <mat-icon [svgIcon]="'mat_outline:close'"></mat-icon>
          </button>
        </div>
      </mat-card>
    </mat-drawer>

    <ng-container *ngIf="allBlogs$ | async as rows">
      <dx-data-grid
        flex
        id="imagesGrid"
        [dataSource]="rows"
        [showBorders]="true"
        [focusedRowEnabled]="true"
        [focusedRowIndex]="0"
        (onCellDblClick)="onCellDoublClicked($event)"
        [repaintChangesOnly]="true"
        keyExpr="id"
      >
        <dxo-paging [pageSize]="20"> </dxo-paging>
        <dxo-pager
          [showPageSizeSelector]="true"
          [allowedPageSizes]="[20, 40, 50, 100]"
        >
        </dxo-pager>
        <dxi-column width="200px" dataField="title"> </dxi-column>
        <dxi-column width="500px" dataField="paragraph"> </dxi-column>
        <dxi-column dataField="body"> </dxi-column>
        <dxi-column dataField="conclusion"> </dxi-column>
        <dxi-column width="100px" dataField="date_created"> </dxi-column>
        <dxi-column width="100px" dataField="date_updated"> </dxi-column>
      </dx-data-grid>
    </ng-container>
  </mat-drawer-container>
</div>
