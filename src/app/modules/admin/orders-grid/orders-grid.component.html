<grid-menubar
[inTitle]="sTitle"
(notifyParentRefresh)="Refresh()"
(notifyParentDelete)="Delete()"
(notifyParentAdd)="Add()"
(notifyParentClone)="Clone()">
</grid-menubar>

<mat-drawer-container>
  <mat-drawer class="h-screen" #drawer [opened]="false" mode="side" [position]="'end'" [disableClose]="false">
    <mat-card class="text-base bg-gray-100">
    <div mat-dialog-title [ngStyle]="{'border-left': '10px solid'  }">{{sTitle}}</div>
    <div mat-dialog-content>
      <form [formGroup]="prdGroup" (ngSubmit)="onUpdate(prdGroup.value)" class="form">

       <mat-form-field class="form-element m-1" [ngStyle]="{ width: '48%' }">
           <input matInput placeholder="Brand" formControlName="brand" />
       </mat-form-field>

       <mat-form-field class="form-element m-1" [ngStyle]="{ width: '48%' }">
           <input matInput placeholder="Price" formControlName="price" />
       </mat-form-field>

       <mat-form-field class="form-element m-1" [ngStyle]="{ width: '100%' }">
           <input matInput placeholder="Description" formControlName="description" />
       </mat-form-field>

       <mat-form-field class="form-element m-1" [ngStyle]="{ width: '100%' }">
           <input matInput placeholder="Rich Description" formControlName="rich_description" />
       </mat-form-field>

       <mat-form-field class="form-element m-1" [ngStyle]="{ width: '100%' }">
           <input matInput placeholder="Main Image" formControlName="image" />
       </mat-form-field>

       <mat-form-field class="form-element m-1" [ngStyle]="{ width: '100%' }">
           <input matInput placeholder="Image List" formControlName="images" />
       </mat-form-field>

       <mat-form-field class="form-element m-1" [ngStyle]="{ width: '48%' }">
           <input matInput placeholder="Category" formControlName="category" />
       </mat-form-field>

       <mat-form-field class="form-element m-1" [ngStyle]="{ width: '48%' }">
           <input matInput placeholder="Rating" formControlName="rating" />
       </mat-form-field>

       <mat-form-field class="form-element m-1" [ngStyle]="{ width: '48%' }">
           <input matInput placeholder="Featured" formControlName="is_featured" />
       </mat-form-field>

       <mat-form-field class="form-element m-1" [ngStyle]="{ width: '48%' }">
           <input matInput placeholder="User" formControlName="user_updated" />
       </mat-form-field>

       <mat-form-field class="form-element m-1" [ngStyle]="{ width: '48%' }">
           <input matInput placeholder="Created Date" type="date" id="date_created" formControlName="date_created" />
       </mat-form-field>

       <mat-form-field  class="form-element m-1" [ngStyle]="{ width: '48%' }" >
           <input matInput placeholder="Updated Date" type="date" id="date_updated" formControlName="date_updated" />
       </mat-form-field>


   </form>
  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="onUpdate(product)" mat-flat-button color="primary" [disabled]="!prdGroup.valid">
       Update
    </button>
    <button mat-button (click)="onCreate()" mat-flat-button color="primary" [disabled]="!prdGroup.valid">
       Insert
    </button>
    <button mat-button (click)="onDelete(product)" mat-flat-button color="primary" [disabled]="!prdGroup.valid">
       Delete
    </button>
    <button mat-button (click)="closeDialog()" mat-flat-button color="warn">
       Close
    </button>
    </div>
  </mat-card>
</mat-drawer>

  <ng-container *ngIf="allProducts$ | async as rows">

     <dx-data-grid [height]="720" id="imagesGrid" [dataSource]="rows" [showBorders]="true"
     [focusedRowEnabled]="true" [focusedRowIndex]="0"
     (onCellDblClick)="onCellDoublClicked($event)"
     (onCellClicked)="onCellClicked($event)" [repaintChangesOnly]="true"
     (onSelectionChanged)="selectionChanged($event)"
     (onFocusedRowChanged)="onFocusedRowChanged($event)"
     keyExpr="id">
     <dxo-paging [pageSize]="20"></dxo-paging>
     <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[20, 40, 50, 100]"></dxo-pager>
        <dxi-column width="300px" dataField="description"></dxi-column>
        <dxi-column width="500px" dataField="rich_description"></dxi-column>
        <dxi-column dataField="brand"></dxi-column>
        <dxi-column dataField="price" type="number"></dxi-column>
        <dxi-column dataField="category"></dxi-column>
        <dxi-column dataField="rating"></dxi-column>
        <dxi-column dataField="is_featured"></dxi-column>
        <dxi-column dataField="user_updated"></dxi-column>
        <dxi-column dataField="date_created"></dxi-column>
        <dxi-column dataField="date_updated"></dxi-column>
   </dx-data-grid>

  </ng-container>
</mat-drawer-container>
